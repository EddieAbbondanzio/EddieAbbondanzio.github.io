<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Software Design - Dependency Injection and Inversion</title>
  
  
  

  
  
  <link rel="stylesheet" href="https://eddieabbondanz.io/sass/index.min.e08a3df902f6e980232ff962af4a0b2195891ba0f245e7e1d33701893379fd63.css" integrity="sha256-4Io9&#43;QL26YAjL/lir0oLIZWJG6DyRefh0zcBiTN5/WM=" media="screen">

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-128571017-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

<body>
  <nav class="navbar fr jcsb aic mt2-phone">
  <a class="title h100 fr aic tdn fwb" href="https://eddieabbondanz.io">
    <img class="avatar mr2" src="https://eddieabbondanz.io/img/avatar.jpg" />
    Eddie Abbondanzio
  </a>

  <div class="menu h100 aic fr-tablet dn-phone">
    
    
    <div class="item dropdown">
      <a class="trigger" href="https://eddieabbondanz.io/post">Blog
        <span class="icon"><i class="fas fa-chevron-down"></i></span>
      </a>

      <div class="content">
        <a href="https://eddieabbondanz.io/post/"> All </a>

        
        <a href="https://eddieabbondanz.io/series/development"> Development </a>
        
        <a href="https://eddieabbondanz.io/series/xj-build"> 00 XJ Build </a>
        
        <a href="https://eddieabbondanz.io/series/88-integra-build"> 88 Integra Build </a>
        
      </div>
    </div>
    
    
    
    <a class="item single" href="https://eddieabbondanz.io/app">Apps</a>
    
    
    
    <a class="item single" href="https://eddieabbondanz.io/about">About</a>
    
    
    <div class="item social h100 fr aic px3">
      
      <a href="http://github.com/EddieAbbondanzio" target="_blank" title="GitHub">
        <span class="icon">
          <i class="fab fa-github fa-lg"></i>
        </span>
      </a>
      
      <a href="https://twitter.com/EAbbondanzio" target="_blank" title="Twitter">
        <span class="icon"><i class="fab fa-twitter fa-lg"></i></span>
      </a>
      
      <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank" title="Linkedin">
        <span class="icon">
          <i class="fab fa-linkedin fa-lg"></i>
        </span>
      </a>
      
    </div>
  </div>

  <a id="hamburger" class="hamburger " href="#" title="Linkedin">
    <span class="icon">
      <i class="fa fa-bars fa-lg"></i>
    </span>
  </a>

</nav>
  <div id="hamburger-menu" class="hamburger-menu">
     

    <div>
      <a> Blog </a>

      <div class="ml2">
        <a href="https://eddieabbondanz.io/post/"> All </a>

        
        <a href="https://eddieabbondanz.io/series/development"> Development </a>
        
        <a href="https://eddieabbondanz.io/series/xj-build"> 00 XJ Build </a>
        
        <a href="https://eddieabbondanz.io/series/88-integra-build"> 88 Integra Build </a>
        
      </div>
    </div>
     
    <a href="https://eddieabbondanz.io/app">Apps</a>
     
    <a href="https://eddieabbondanz.io/about">About</a>
    

    <div class="fr jcse">
      
      <a href="http://github.com/EddieAbbondanzio" target="_blank">
        <span class="icon is-medium">
          <i class="fab fa-github fa-lg"></i>
        </span>
      </a>
       
      <a href="https://twitter.com/EAbbondanzio" target="_blank">
        <span class="icon is-medium">
          <i class="fab fa-twitter fa-lg"></i>
        </span>
      </a>
      
      <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank">
        <span class="icon is-medium">
          <i class="fab fa-linkedin fa-lg"></i>
        </span>
      </a>
      
    </div>
  </div>

  <main>
    
    <h1 class="title">Software Design - Dependency Injection and Inversion</h1>
    
    
<article>
  <div class="meta pb3-phone">
    

    
    <div class="date" title="Posted on Oct 18, 2018">
      <i class="fas fa-calendar-day"></i>
      <time>Oct 18, 2018</time>
    </div>
    
  </div>

  <h2 id="what-are-they">What are they?</h2>
<p>While it may seem like nothing more than buzz words, dependency injection is a well known principle. In fact, you&rsquo;ve likely used it yourself in the past and just didn&rsquo;t know the technique had a name. Dependency injection can be thought of as passing a resource required by a class to the class through one of several means. While the class could instantiate a new instance of the resource itself, by using dependency injection we introduce an easier way to take advantage of dependency inversion.</p>
<p>Dependency inversion sounds similar but is a slightly different principle. In simple terms, dependency inversion prevents high level modules from relying upon low level modules through the use of an abstraction. This inverts the dependency such that the higher level class no longer relies upon a concrete implementation, and can utilize any resource that complies with the dependency contract defined through the abstraction.</p>
<p>Dependency injection comes in three different flavors:</p>
<ul>
<li>Constructor injection</li>
<li>Method injection</li>
<li>Property injection</li>
</ul>
<h2 id="constructor-injection">Constructor injection</h2>
<p>Constructor injection is where the dependency is passed to the dependent class directly through it&rsquo;s constructor. This method should be used when the dependent is reliant upon the dependency in such a way that the dependent cannot function without it.</p>
<h2 id="method--property-injection">Method / Property injection</h2>
<p>Since these two are similar in nature we&rsquo;ll combine them. Method injection is when the dependency is passed to the dependent class via a method. Property injection on the other hand, is where the dependency is injected via a setter property on the dependent. These should be used when a class has a dependency but isn&rsquo;t fully reliant upon it. The dependent class should be able to still function in some manner without it.</p>
<h2 id="a-working-example">A Working Example</h2>
<p>Imagine we are designing an <code>EmailInbox</code> that needs to be able to send and receive emails. The <code>EmailInbox</code> will depend on an <code>EmailService</code> for communicating with the network.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmailService</span> {
        <span style="color:#66d9ef">public</span> List&lt;Email&gt; CheckForEmails() {
            <span style="color:#75715e">//Non-important implementation...
</span><span style="color:#75715e"></span>        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> SendEmail(Email email){
            <span style="color:#75715e">//Blah blah blah
</span><span style="color:#75715e"></span>        }
    }
</code></pre></div><p>Since an <code>EmailInbox</code> would be pretty useless without the <code>EmailService</code>, we could argue this would be a good use of constructor injection.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmailInbox</span> {
        <span style="color:#66d9ef">private</span> EmailService EmailService { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }

        <span style="color:#66d9ef">public</span> EmailInbox(EmailService emailService) {
            <span style="color:#66d9ef">this</span>.EmailService = emailService;
        }
    }
</code></pre></div><p>This works decently, but our <code>EmailInbox</code> is restricted to a single email service. What if we want to expand it&rsquo;s compatibility to support other email services? For this, we could take advantage of dependency inversion. The first step would be to define our dependencies contract via an interface.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> IEmailService {
        List&lt;Email&gt; CheckForEmails();

        <span style="color:#66d9ef">void</span> SendEmail(Email email);
    }
</code></pre></div><p>Now we need to update our <code>EmailInbox</code> to rely on interface references.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmailInbox</span> {
        <span style="color:#66d9ef">private</span> IEmailService EmailService { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }

        <span style="color:#66d9ef">public</span> EmailInbox(IEmailService emailService) {
            <span style="color:#66d9ef">this</span>.EmailService = emailService;
        }
    }
</code></pre></div><p>And just like that we have utilized dependency inversion to no longer be reliant upon the lower level module (<code>EmailService</code>). Now the <code>EmailInbox</code> can be created with any <code>EmailService</code> that can implements the interface <code>IEmailService</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GmailEmailService</span> : IEmailService {
        ...
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HotmailEmailService</span> : IEmailService {
        ...
    }

    <span style="color:#75715e">//Create a new Gmail based inbox.
</span><span style="color:#75715e"></span>    IEmailService gmailService = <span style="color:#66d9ef">new</span> GmailEmailService();
    EmailInbox gmailInbox = <span style="color:#66d9ef">new</span> EmailInbox(gmailService);

    <span style="color:#75715e">//Create a new Hotmail based inbox.
</span><span style="color:#75715e"></span>    IEmailService hotmailService = <span style="color:#66d9ef">new</span> HotmailEmailService();
    EmailInbox hotmailInbox = <span style="color:#66d9ef">new</span> EmailInbox(hotmailService);
</code></pre></div><p>These two concepts can be easy to confuse since they share such similar names, and are used together. Hopefully this article helped clarify them.</p>

</article>

  </main>

  <footer>
  <p>&copy; 2013 - 2022 Eddie Abbondanzio</p>
</footer>
  <script src="https://eddieabbondanz.io/js/lol.js"></script>
</body>


</html>