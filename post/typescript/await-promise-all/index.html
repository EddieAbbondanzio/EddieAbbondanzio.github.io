<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>TypeScript - Await Promise.All() And Get The Results</title>
    
      <meta name="description" content="My blog about my project cars and other contraptions" />
    
    
      <meta name="author" content="Eddie Abbondanzio" />
    
    

    
    
    <link
      rel="stylesheet"
      href="https://eddieabbondanz.io/sass/index.min.e8401ce051b85ccf39fd80d6c1466eb941846856f3b81512c7a61c44855a7e2c.css"
      integrity="sha256-6EAc4FG4XM85/YDWwUZuuUGEaFbzuBUSx6YcRIVafiw="
      media="screen"
    />

    <link
      rel="stylesheet"
      href="https://eddieabbondanz.io//widgets/_plugin-vue_export-helper.css"
    />

    <script
      data-goatcounter="https://tgpo.eddieabbondanz.io/count"
      async
      src="//tgpo.eddieabbondanz.io/count.js"
    ></script>
  </head>

  <body>
    <nav class="navbar fr jcsb aic mt2-phone">
  <div class="title h100 fr aic">
    <a href="https://eddieabbondanz.io/">
      <img class="avatar mr2" src="https://eddieabbondanz.io/img/avatar.jpg" />
    </a>

    <a class="tdn fwb" href="https://eddieabbondanz.io/">
      <span>Eddie Abbondanzio</span>
    </a>
  </div>

  <div id="desktop-search" class="pr2 hidden-phone">
    
  </div>

  <div class="menu h100 aic fr-tablet dn-phone">
     
    <div class="item dropdown">
      <a class="trigger"
        >Blog
        <span class="icon"><i class="fas fa-chevron-down"></i></span>
      </a>
      <div class="content-wrapper">
        <div class="content">
          <a href="https://eddieabbondanz.io/post/"> All </a>

          
          <a href="https://eddieabbondanz.io/categories/development">Development</a>
          
          <a href="https://eddieabbondanz.io/categories/ls-xj-build">LS XJ Build</a>
          
          <a href="https://eddieabbondanz.io/categories/oem&#43;-xj-build">OEM&#43; XJ Build</a>
          
          <a href="https://eddieabbondanz.io/categories/93-eg-hatch-build">93 EG Hatch Build</a>
          
          <a href="https://eddieabbondanz.io/categories/88-integra-build">88 Integra Build</a>
          
          <a href="https://eddieabbondanz.io/categories/honda-info-and-diys">Honda Info and DIYs</a>
          
          <a href="https://eddieabbondanz.io/categories/xj-info-and-diys">XJ Info and DIYs</a>
          
          <a href="https://eddieabbondanz.io/categories/shop-and-tools">Shop and Tools</a>
          
        </div>
      </div>
    </div>
      
    <a class="item single" href="https://eddieabbondanz.io/app">Apps</a>
      
    <a class="item single" href="https://eddieabbondanz.io/about">About</a>
     
    <div class="item social h100 fr aic px3">
      
      <a href="http://github.com/EddieAbbondanzio" target="_blank" title="GitHub">
        <span class="icon">
          <i class="fab fa-github fa-lg"></i>
        </span>
      </a>
      
      <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank" title="Linkedin">
        <span class="icon">
          <i class="fab fa-linkedin fa-lg"></i>
        </span>
      </a>
      
    </div>
  </div>

  <a id="hamburger" class="hamburger" href="#">
    <span class="icon">
      <i class="fa fa-bars fa-lg"></i>
    </span>
  </a>
</nav>

    
<div id="hamburger-menu" class="hamburger-menu">
   

  <div>
    <div id="phone-search" class="mt2">
      
    </div>
    
    <div class="ml2">
      <a href="https://eddieabbondanz.io/post/"> All </a>

      
      <a href="https://eddieabbondanz.io/categories/development"> Development </a>
      
      <a href="https://eddieabbondanz.io/categories/ls-xj-build"> LS XJ Build </a>
      
      <a href="https://eddieabbondanz.io/categories/oem&#43;-xj-build"> OEM&#43; XJ Build </a>
      
      <a href="https://eddieabbondanz.io/categories/93-eg-hatch-build"> 93 EG Hatch Build </a>
      
      <a href="https://eddieabbondanz.io/categories/88-integra-build"> 88 Integra Build </a>
      
      <a href="https://eddieabbondanz.io/categories/honda-info-and-diys"> Honda Info and DIYs </a>
      
      <a href="https://eddieabbondanz.io/categories/xj-info-and-diys"> XJ Info and DIYs </a>
      
      <a href="https://eddieabbondanz.io/categories/shop-and-tools"> Shop and Tools </a>
      
    </div>
  </div>
   
  <a href="https://eddieabbondanz.io/app">Apps</a>
   
  <a href="https://eddieabbondanz.io/about">About</a>
  

  <div class="fr jcse">
    
    <a href="http://github.com/EddieAbbondanzio" target="_blank">
      <span class="icon is-medium">
        <i class="fab fa-github fa-lg"></i>
      </span>
    </a>
    
    <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank">
      <span class="icon is-medium">
        <i class="fab fa-linkedin fa-lg"></i>
      </span>
    </a>
    
  </div>
</div>


    <main>
      
  <article class="post" data-pagefind-meta="image:/post/typescript/await-promise-all/images/featured.jpg">
    <h1 class="h1 mb2" data-pagefind-meta="title">
      
      TypeScript - Await Promise.All() And Get The Results
    </h1>

    <div class="fr meta pb3">
      
        <a
          class="mr1ch tdn"
          href="https://eddieabbondanz.io/categories/development"
          title="More Development posts"
        >
          <i class="fas fa-folder"></i>
          Development
        </a>
      
      

      
        <div class="date" title="Posted on Mar 15, 2020">
          <i class="fas fa-calendar-day"></i>
          <time>Mar 15, 2020</time>
        </div>
      
    </div>

    <div class="markdown-body" data-pagefind-body>
      <p>I&rsquo;m a big fan of the <code>async</code> <code>await</code> syntax in ES2017. In my opinion it just feels a lot more natural than <a href="https://www.youtube.com/watch?v=CkdyU_eUm1U" target="_blank" rel="noopener">and then and then and then&hellip;</a>. I digress. I&rsquo;ll keep this one short.</p>
<p><code>Promise.all()</code> allows us to run multiple async operations in parallel instead of running them in series. This is great for times when we need to make multiple API calls that are independent of each other.</p>
<p>Imagine we had two long running task like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getFoo</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span>&lt;<span style="color:#f92672">Foo</span>&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// magic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getBar</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span>&lt;<span style="color:#f92672">Bar</span>&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// more magic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>And they take so long that calling them in series was frustrating your users who can&rsquo;t wait more than a few seconds for something to load.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">foo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">getFoo</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bar</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">getBar</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// too slow!
</span></span></span></code></pre></div><p>So we need the assistance of <code>Promise.all()</code> to run them in series. But we also need to get the values back. <code>Promise.all()</code> takes an input of an array. This is important to remember as it&rsquo;s easy to pass them as seperate parameters and wonder why it only returns the first promise.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#75715e">// bad
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">await</span> <span style="color:#a6e22e">Promise</span>.<span style="color:#a6e22e">all</span>(<span style="color:#a6e22e">getFoo</span>(), <span style="color:#a6e22e">getBar</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// good!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">await</span> <span style="color:#a6e22e">Promise</span>.<span style="color:#a6e22e">all</span>([<span style="color:#a6e22e">getFoo</span>(), <span style="color:#a6e22e">getBar</span>()]);
</span></span></code></pre></div><p>When awaited <code>Promise.all()</code> returns an array of results that matches up with the inputs. Therefore when we pass an input of <code>[Promise&lt;Foo&gt;, Promise&lt;Bar&gt;]</code> the output will be <code>[Foo, Bar]</code>. And best of all when paired up with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">array destructuring</a> it feels perfectly natural.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">foo</span>, <span style="color:#a6e22e">bar</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">Promise</span>.<span style="color:#a6e22e">all</span>([<span style="color:#a6e22e">getFoo</span>(), <span style="color:#a6e22e">getBar</span>()]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">foo</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">bar</span>);
</span></span></code></pre></div><p>Enjoy your newly found knowledge and happy coding!</p>

    </div>
  </article>

    </main>

    <footer>
  <p>&copy; 2013 - 2025 Eddie Abbondanzio</p>
</footer>
    <script src="https://eddieabbondanz.io/js/lol.js"></script>
    <link href="https://eddieabbondanz.io/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="https://eddieabbondanz.io/pagefind/pagefind-ui.js"></script>

<script>
  const DRAWER_QUERY = ".pagefind-ui__drawer"

  
  window.addEventListener('DOMContentLoaded', (event) => {
    initDesktopSearchBar();
    initPhoneSearchBar();
  });

  function initDesktopSearchBar() {
    new PagefindUI({
      element: "#desktop-search", 
      showSubResults: false, 
      pageSize: 10, 
      translations: {
        placeholder: "Search posts"
      } 
    });

    
    const input = document.querySelector("#desktop-search input")
    input.addEventListener("focus", () => {
      const drawer = document.querySelector(DRAWER_QUERY)
      if(drawer) {
        drawer.classList.remove("hidden")
      }
    })

    
    window.addEventListener("click", (ev) => {
      if(!ev.target.closest("#desktop-search")) {
        const drawer = document.querySelector(DRAWER_QUERY)
        drawer.classList.add("hidden")
      }
    })
  }

  function initPhoneSearchBar() {
    new PagefindUI({
      element: "#phone-search", 
      showSubResults: false, 
      pageSize: 10, 
      translations: {
        placeholder: "Search posts"
      } 
    });

        
    const input = document.querySelector("#desktop-search input")
    input.addEventListener("focus", () => {
      const drawer = document.querySelector(DRAWER_QUERY)
      if(drawer) {
        drawer.classList.remove("hidden")
      }
    })

    
    window.addEventListener("click", (ev) => {
      if(!ev.target.closest("#desktop-search")) {
        const drawer = document.querySelector(DRAWER_QUERY)
        drawer.classList.add("hidden")
      }
    })

  }
</script>
  </body>
</html>
