<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Logging to Unity or Console</title>
  
  <meta name="description" content="My blog about my project cars and other contraptions">
  
  <meta name="author" content="Eddie Abbondanzio">
  

  
  
  <link rel="stylesheet" href="https://eddieabbondanz.io/sass/index.min.79526dae8d29fab82bb520e28634f9db92f9ed4cda79daa0ddbf5508bedda33d.css" integrity="sha256-eVJtro0p&#43;rgrtSDihjT525L57Uzaedqg3b9VCL7doz0=" media="screen">

  <link rel="stylesheet" href="https://eddieabbondanz.io//widgets/_plugin-vue_export-helper.css">

  <script data-goatcounter="https://tgpo.eddieabbondanz.io/count" async src="//tgpo.eddieabbondanz.io/count.js"></script>
</head>

<body>
  <nav class="navbar fr jcsb aic mt2-phone">
  <div class="title h100 fr aic">
    <a href="https://eddieabbondanz.io/">
      <img class="avatar mr2" src="https://eddieabbondanz.io/img/avatar.jpg" />
    </a>

    <a class="tdn fwb" href="https://eddieabbondanz.io/">
      <span>Eddie Abbondanzio</span>
    </a>
  </div>

  <div id="desktop-search" class="pr2 hidden-phone">
    
  </div>

  <div class="menu h100 aic fr-tablet dn-phone">
     
    <div class="item dropdown">
      <a class="trigger"
        >Blog
        <span class="icon"><i class="fas fa-chevron-down"></i></span>
      </a>
      <div class="content-wrapper">
        <div class="content">
          <a href="https://eddieabbondanz.io/post/"> All </a>

          
          <a href="https://eddieabbondanz.io/series/development">Development</a>
          
          <a href="https://eddieabbondanz.io/series/ls-xj-build">LS XJ Build</a>
          
          <a href="https://eddieabbondanz.io/series/oem&#43;-xj-build">OEM&#43; XJ Build</a>
          
          <a href="https://eddieabbondanz.io/series/93-eg-hatch-build">93 EG Hatch Build</a>
          
          <a href="https://eddieabbondanz.io/series/88-integra-build">88 Integra Build</a>
          
          <a href="https://eddieabbondanz.io/series/honda-info-and-diys">Honda Info and DIYs</a>
          
          <a href="https://eddieabbondanz.io/series/xj-info-and-diys">XJ Info and DIYs</a>
          
          <a href="https://eddieabbondanz.io/series/shop-and-tools">Shop and Tools</a>
          
        </div>
      </div>
    </div>
      
    <a class="item single" href="https://eddieabbondanz.io/app">Apps</a>
      
    <a class="item single" href="https://eddieabbondanz.io/about">About</a>
     
    <div class="item social h100 fr aic px3">
      
      <a href="http://github.com/EddieAbbondanzio" target="_blank" title="GitHub">
        <span class="icon">
          <i class="fab fa-github fa-lg"></i>
        </span>
      </a>
      
      <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank" title="Linkedin">
        <span class="icon">
          <i class="fab fa-linkedin fa-lg"></i>
        </span>
      </a>
      
    </div>
  </div>

  <a id="hamburger" class="hamburger" href="#">
    <span class="icon">
      <i class="fa fa-bars fa-lg"></i>
    </span>
  </a>
</nav>

  
<div id="hamburger-menu" class="hamburger-menu">
   

  <div>
    <div id="phone-search" class="mt2">
      
    </div>
    
    <div class="ml2">
      <a href="https://eddieabbondanz.io/post/"> All </a>

      
      <a href="https://eddieabbondanz.io/series/development"> Development </a>
      
      <a href="https://eddieabbondanz.io/series/ls-xj-build"> LS XJ Build </a>
      
      <a href="https://eddieabbondanz.io/series/oem&#43;-xj-build"> OEM&#43; XJ Build </a>
      
      <a href="https://eddieabbondanz.io/series/93-eg-hatch-build"> 93 EG Hatch Build </a>
      
      <a href="https://eddieabbondanz.io/series/88-integra-build"> 88 Integra Build </a>
      
      <a href="https://eddieabbondanz.io/series/honda-info-and-diys"> Honda Info and DIYs </a>
      
      <a href="https://eddieabbondanz.io/series/xj-info-and-diys"> XJ Info and DIYs </a>
      
      <a href="https://eddieabbondanz.io/series/shop-and-tools"> Shop and Tools </a>
      
    </div>
  </div>
   
  <a href="https://eddieabbondanz.io/app">Apps</a>
   
  <a href="https://eddieabbondanz.io/about">About</a>
  

  <div class="fr jcse">
    
    <a href="http://github.com/EddieAbbondanzio" target="_blank">
      <span class="icon is-medium">
        <i class="fab fa-github fa-lg"></i>
      </span>
    </a>
    
    <a href="https://www.linkedin.com/in/ed-abbondanzio-5a7378208/" target="_blank">
      <span class="icon is-medium">
        <i class="fab fa-linkedin fa-lg"></i>
      </span>
    </a>
    
  </div>
</div>

  <main>
    
<article class="post" data-pagefind-meta="image:">
  <h1 class="h1 mb2" data-pagefind-meta="title">
    
    Logging to Unity or Console
  </h1>

  <div class="fr meta pb3">
    
    <a class="mr1ch tdn" href="https://eddieabbondanz.io/series/development" title="More Development posts">
      <i class="fas fa-th-list"></i>
      Development
    </a>
    

    
    <div class="date" title="Posted on Mar 31, 2018">
      <i class="fas fa-calendar-day"></i>
      <time>Mar 31, 2018</time>
    </div>
    
  </div>

  <div class="markdown-body" data-pagefind-body>
    <p>Sometimes we want code that can run outside of Unity and that can make things tricky when it comes to writing text to console. Unity has it&rsquo;s own set of methods for writing to it&rsquo;s command console via the Debug class with the most commonly used one being Debug.Log(). However in the event you want to create a library of code that can be run within Unity or in the command console (say a game server for example) you&rsquo;ll need a way to differentiate between the running environments. Instead of wrapping all our Debug.Log() calls in preprocessor directives such as #IF UNITY_EDITOR we can write a simple logging class to handle it for us. While we&rsquo;re at it well add the ability to write log files since they can be quite useful.</p>
<p>Before we go ahead and dive into creating the new logger we&rsquo;ll need to add a few helpers first.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> LogLevel : <span style="color:#66d9ef">byte</span> {
</span></span><span style="display:flex;"><span>    None = <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    Normal = <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    Verbose = <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> LogOutput : <span style="color:#66d9ef">byte</span> {
</span></span><span style="display:flex;"><span>    Unity = <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    Console = <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    FileOnly = <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The LogLevel lets us control what log messages are displayed. Say for example you want to run in a minimal logging mode, by setting the log level to normal, it would hide
any message that has a level of verbose from being displayed. Verbose messages would still be written to the log file however.</p>
<p>LogOuput is just an easy way to track if we should be using Debug.Log() or Console.WriteLine(). Lastly lets go ahead and define a struct for storing all of the log settings. This will allow us to store &lsquo;profiles&rsquo; of how the logger should behave.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Contains info regarding how the Logger</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// should operate. Contains some predefined</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// profiles to simplify the process.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">LogProfile</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Allows for different levels of log statements</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// to be picked. If verbose, then every log statement</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// is printed.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> LogLevel Level { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// What method should be used for outputting</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// log statements.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> LogOutput Output { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// If the log history should be saved to file when</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the application closes.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> SaveToFile { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#endregion</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#region</span> Constructor(s)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Create a new log profile that doesn&#39;t</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// save to file.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> LogProfile(LogLevel level, LogOutput output) {
</span></span><span style="display:flex;"><span>        Level = level;
</span></span><span style="display:flex;"><span>        Output = output;
</span></span><span style="display:flex;"><span>        SaveToFile = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Create a new log profile that can save to file.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> LogProfile(LogLevel level, LogOutput output, <span style="color:#66d9ef">bool</span> saveFile) {
</span></span><span style="display:flex;"><span>        Level = level;
</span></span><span style="display:flex;"><span>        Output = output;
</span></span><span style="display:flex;"><span>        SaveToFile = saveFile;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then we can define some static instances as such:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The default logging profile for when running in unity debug.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> LogProfile UnityDebug = <span style="color:#66d9ef">new</span> LogProfile(LogLevel.Verbose, LogOutput.Unity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Used for debugging the server.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> LogProfile ConsoleDebug = <span style="color:#66d9ef">new</span> LogProfile(LogLevel.Verbose, LogOutput.Console);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Used for release builds.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> LogProfile Release = <span style="color:#66d9ef">new</span> LogProfile(LogLevel.None, LogOutput.FileOnly, <span style="color:#66d9ef">true</span>);
</span></span></code></pre></div><p>Now Let&rsquo;s go ahead and define our new logging class. You&rsquo;ll want this to be static to prevent needing a reference to an instance of it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Logger utility for logging custom error or log messages to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// console and file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoggerUtils</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We&rsquo;ll want to create a few settings for the file writer to follow. The directory name doesn&rsquo;t matter, and the max count can be whatever. We just don&rsquo;t want to fill the users storage space with thousands of log files.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The file extension to use for log files.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">string</span> LogFileExtension = <span style="color:#e6db74">&#34;txt&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The folder to save logs in.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">string</span> LogFileDirectory = <span style="color:#e6db74">&#34;VoxLogs&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The max number of log files allowed in the folder</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// at one time.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MaxLogCount = <span style="color:#ae81ff">8</span>;
</span></span></code></pre></div><p>Now lets add a list to track all the messages that have been logged. Along with a profile for the settings</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The collection of log messages to store.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> List&lt;<span style="color:#66d9ef">string</span>&gt; Messages { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Controls how the logger operates.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> LogProfile profile;
</span></span></code></pre></div><p>Let&rsquo;s add a static constructor to initialize the local variables. This will default the Logger to release mode. I&rsquo;ll explain what the destructor is in a minute.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> LoggerUtils() {
</span></span><span style="display:flex;"><span>    profile = LogProfile.Release;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Messages = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>    destructor = <span style="color:#66d9ef">new</span> Destructor();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Add in some public methods. One to allow setting of the log profile, and several for logging statements. Feel free to change them to your liking as these are just provided as basic examples. The switch statment checks to see where logging should be outputted to. If LogOutput is set to none, nothing will be printed but the message will be saved in the list. I didn&rsquo;t apply the log level to the error method as in my opinion, an error shouldn&rsquo;t be hidden.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Set what profile the logger should follow.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> SetLogProfile(LogProfile logProfile) {
</span></span><span style="display:flex;"><span>    profile = logProfile;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Log an error to console and to the log file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> LogError(<span style="color:#66d9ef">string</span> message) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> fullError = DateTime.Now.ToString(<span style="color:#e6db74">&#34;h:mm:ss tt&#34;</span>) + <span style="color:#e6db74">&#34;: ERROR: &#34;</span> + message;
</span></span><span style="display:flex;"><span>    Messages.Add(fullError);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (profile.Output) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> LogOutput.Unity:
</span></span><span style="display:flex;"><span>            Debug.Log(fullError);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> LogOutput.Console:
</span></span><span style="display:flex;"><span>            Console.WriteLine(fullError);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Log a warning to the console and add to the log file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> LogWarning(<span style="color:#66d9ef">string</span> message, LogLevel level = LogLevel.Normal) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> fullWarn = DateTime.Now.ToString(<span style="color:#e6db74">&#34;h:mm:ss tt&#34;</span>) + <span style="color:#e6db74">&#34;: WARNING: &#34;</span> + message;
</span></span><span style="display:flex;"><span>    Messages.Add(fullWarn);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (level &lt;= profile.Level &amp;&amp; level &gt; <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> (profile.Output) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> LogOutput.Unity:
</span></span><span style="display:flex;"><span>                Debug.LogWarning(fullWarn);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> LogOutput.Console:
</span></span><span style="display:flex;"><span>                Console.WriteLine(fullWarn);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Log a message to console and to the log file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Log(<span style="color:#66d9ef">string</span> message, LogLevel level = LogLevel.Normal) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> fullLog = DateTime.Now.ToString(<span style="color:#e6db74">&#34;h:mm:ss tt&#34;</span>) + <span style="color:#e6db74">&#34;: &#34;</span> + message;
</span></span><span style="display:flex;"><span>    Messages.Add(fullLog);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(level &lt;= profile.Level &amp;&amp; level &gt; <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> (profile.Output) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> LogOutput.Unity:
</span></span><span style="display:flex;"><span>                Debug.Log(fullLog);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> LogOutput.Console:
</span></span><span style="display:flex;"><span>                Console.WriteLine(fullLog);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since a static class can&rsquo;t have a destructor we need to create a work around. The destructor is responsible for calling SaveLogFile() when the application closes. If you don&rsquo;t want to use this method just make sure to have some external instance call SaveLogFile() elsewhere when the application is closing. Place this sealed class anywhere within the LoggerUtils class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// This is a little rigged contraption to allow for</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// saving of the log file when the app is closed.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Source: https://stackoverflow.com/questions/4364665/static-destructor</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Destructor</span> {
</span></span><span style="display:flex;"><span>    ~Destructor() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (profile.SaveToFile) {
</span></span><span style="display:flex;"><span>            SaveLogFile();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Lastly lets add the SaveLogFile() method. I use some helper functions which I will include but you can use your own if you prefer.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Store all of the log calls made to file.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> SaveLogFile() {
</span></span><span style="display:flex;"><span>    Log(<span style="color:#e6db74">&#34;Saving log file&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    List&lt;<span style="color:#66d9ef">byte</span>&gt; logBytes = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">byte</span>&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//Add each message to the byte array and add a new line after each.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">string</span> msg <span style="color:#66d9ef">in</span> Messages) {
</span></span><span style="display:flex;"><span>        logBytes.AddRange(Encoding.ASCII.GetBytes(msg));
</span></span><span style="display:flex;"><span>        logBytes.AddRange(Encoding.ASCII.GetBytes(Environment.NewLine));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//Don&#39;t save more than 8 files at any time.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span>(FileUtils.GetFileCount(LogFileDirectory) &gt;= MaxLogCount) {
</span></span><span style="display:flex;"><span>        FileUtils.DeleteFileAtIndex(LogFileDirectory, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//Save the file.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> fullLogFileName = <span style="color:#e6db74">&#34;VoxLogFile&#34;</span> + DateTime.Now.ToString(<span style="color:#e6db74">&#34;yyyy-MM-dd-HH-mm-ss&#34;</span>) + <span style="color:#e6db74">&#34;.&#34;</span> + LogFileExtension;
</span></span><span style="display:flex;"><span>    FileUtils.SaveFile(LogFileDirectory, fullLogFileName, logBytes.ToArray(), <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Returns the number of files in the directory.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> GetFileCount(<span style="color:#66d9ef">string</span> directory) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (Directory.Exists(directory)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Directory.GetFiles(directory).Length;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Save an array of bytes to file. Set overwrite</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// to true to over write any pre existing files.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> SaveFile(<span style="color:#66d9ef">string</span> directory, <span style="color:#66d9ef">string</span> fileName, <span style="color:#66d9ef">byte</span>[] fileContent, <span style="color:#66d9ef">bool</span> overwrite = <span style="color:#66d9ef">false</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> fullFileName = directory + <span style="color:#e6db74">&#34;/&#34;</span> + fileName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//If the folder doesn&#39;t exist. Make it.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (!Directory.Exists(directory)) {
</span></span><span style="display:flex;"><span>        Directory.CreateDirectory(directory);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//File already exists. Check if overwrite is enabled.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (File.Exists(fullFileName)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (overwrite) {
</span></span><span style="display:flex;"><span>            File.Delete(fullFileName);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//Create the new filestream.</span>
</span></span><span style="display:flex;"><span>    FileStream fileStream = <span style="color:#66d9ef">new</span> FileStream(fullFileName, FileMode.Create, FileAccess.Write, FileShare.None);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//Write the content to file.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">using</span> (BinaryWriter binWriter = <span style="color:#66d9ef">new</span> BinaryWriter(fileStream)) {
</span></span><span style="display:flex;"><span>        binWriter.Write(fileContent);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    fileStream.Close();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Delete the file at specified index in the directory.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> DeleteFileAtIndex(<span style="color:#66d9ef">string</span> directory, <span style="color:#66d9ef">int</span> index) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(index &gt;= <span style="color:#ae81ff">0</span> &amp;&amp; index &lt; Directory.GetFiles(directory).Length) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">string</span> fileName = Directory.GetFiles(directory)[index];
</span></span><span style="display:flex;"><span>        File.Delete(fileName);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>To use the new LoggerUtils class simple call LoggerUtils.SetLogProfile(YOUR_PROFILE_HERE). Then use any of it&rsquo;s .Log() methods. If you want to add a way to automatically set the log profile to Unity debug when in the Unity editor add the following tidbit in an Awake() method of a monoBehaviour in your game.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> Awake(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#if</span> UNITY_EDITOR
</span></span><span style="display:flex;"><span>        LoggerUtils.SetLogProfile(LogProfile.UnityDebug);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#endif</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  </div>
</article>

  </main>

  <footer>
  <p>&copy; 2013 - 2025 Eddie Abbondanzio</p>
</footer>
  <script src="https://eddieabbondanz.io/js/lol.js"></script>
  <link href="https://eddieabbondanz.io/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="https://eddieabbondanz.io/pagefind/pagefind-ui.js"></script>

<script>
  const DRAWER_QUERY = ".pagefind-ui__drawer"

  
  window.addEventListener('DOMContentLoaded', (event) => {
    initDesktopSearchBar();
    initPhoneSearchBar();
  });

  function initDesktopSearchBar() {
    new PagefindUI({
      element: "#desktop-search", 
      showSubResults: false, 
      pageSize: 10, 
      translations: {
        placeholder: "Search posts"
      } 
    });

    
    const input = document.querySelector("#desktop-search input")
    input.addEventListener("focus", () => {
      const drawer = document.querySelector(DRAWER_QUERY)
      if(drawer) {
        drawer.classList.remove("hidden")
      }
    })

    
    window.addEventListener("click", (ev) => {
      if(!ev.target.closest("#desktop-search")) {
        const drawer = document.querySelector(DRAWER_QUERY)
        drawer.classList.add("hidden")
      }
    })
  }

  function initPhoneSearchBar() {
    new PagefindUI({
      element: "#phone-search", 
      showSubResults: false, 
      pageSize: 10, 
      translations: {
        placeholder: "Search posts"
      } 
    });

        
    const input = document.querySelector("#desktop-search input")
    input.addEventListener("focus", () => {
      const drawer = document.querySelector(DRAWER_QUERY)
      if(drawer) {
        drawer.classList.remove("hidden")
      }
    })

    
    window.addEventListener("click", (ev) => {
      if(!ev.target.closest("#desktop-search")) {
        const drawer = document.querySelector(DRAWER_QUERY)
        drawer.classList.add("hidden")
      }
    })

  }
</script>
</body>

</html>