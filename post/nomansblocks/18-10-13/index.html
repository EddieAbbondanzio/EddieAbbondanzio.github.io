<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>No Mans Blocks - 10/13/2018</title>
    
    
    

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    
    
    <link rel="stylesheet" href="https://eddieabbondanz.io/sass/main.min.cfaf5a82ddb1997768713c5494447077b834f7a9145e7079037250a4029c50af.css" integrity="sha256-z69agt2xmXdocTxUlERwd7g096kUXnB5A3JQpAKcUK8=" media="screen">

    <script src="https://eddieabbondanz.io/js/interactivity.js"></script>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-128571017-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>

<body class="has-background-light">
    
        <section id="hero-header" class="hero is-fullheight is-primary">
            

            <div class="hero-head">
                <nav class="navbar is-transparent is-spaced" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item title is-marginless has-text-white" href="https://eddieabbondanz.io">
            Eddie Abbondanzio
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
            data-target="hamburger-menu">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="hamburger-menu" class="navbar-menu">
        <div class="navbar-end">
            <a class="navbar-item" href="https://eddieabbondanz.io/about">
                About Me
            </a>

            
            <a class="navbar-item" href="http://github.com/EddieAbbondanzio" target="_blank">
                GitHub
            </a>
            

            
            <a class="navbar-item" href="https://twitter.com/EAbbondanzio" target="_blank">
                Twitter
            </a>
            
        </div>
    </div>
</nav>
            </div>

            
            
            <div class="hero-foot">
                <div class="container">
                    <header>
    <div class="post-header has-text-white has-margin-all-4-touch has-margin-bottom-4-desktop">

        
        <div class="has-margin-bottom-3">
            <h1 class="is-marginless is-size-3-touch is-size-1-desktop">
                No Mans Blocks - 10/13/2018
            </h1>

            
        </div>

        
        <div class="is-flex-desktop flex-row  has-text-grey-lighter">
            <div class="is-flex is-flex-row is-align-middle  has-margin-right-3" title="Author">
                <i class="material-icons has-text-grey-light has-margin-right-1">today</i>
                <time class="has-text-grey-lighter">Oct 13, 2018</time>
            </div>

            
        </div>
    </div>
</header>
                </div>
            </div>
            
        </section>

    <main class="container has-background-white">
        
<article>
    <h1 id="where-ive-been-and-where-im-heading">Where I've Been, and Where I'm Heading</h1>
<p>I took somewhat of an unplanned hiatus from working on No Mans Blocks. Initially, I took a break because I wanted to pursue writing a server for a Reddit clone. It wasn't until about two months in that I realized just how over scoped the project was and how long it would take to finish. While I may not have much to show for this time, it did open my eyes up to some of the common software-architecture patterns, and how to utilize these patterns to better organize my projects. During my adventure I also picked up TypeScript and dived into the intriguing world of NodeJS.</p>
<p>NodeJS was an interesting experience coming from C#. I never really understood async well until getting into Node, and let's just say it was a little rough getting started. Promises were another concept I had never dealt with before but honestly they can produce some elegant solutions. Typescript also helps keep one from entering the dreaded call back hell thanks to it's async and await features.</p>
<p>But anyways that enough rambling. I want to talk about the progress of No Mans Blocks. For anyone who is new to my blog, No Mans Blocks is a voxel first person shooter multiplayer game I've been working on in my spare time. It's built in Unity and uses a custom voxel engine I like to call Voxelated. My vision for this project is to develop a game akin to the Ace of Spades beta before Jagex took over.</p>
<h2 id="network-set-up">Network Set Up</h2>
<p>These past two weeks I've been working on building a master server. The master server will be used as an account server, and used by game servers to validate users are who they claim to be. Game servers can be ran by anyone as the master server is only used to prevent malicious users from pretending to be someone they aren't. Here's a poorly drawn diagram of the network model.</p>
<p><img src="images/1.jpg" alt=""></p>
<p>Whenever a user first logs in the client will send a login request to the master server. The master server will then verify their credentials against the database and return back a json web token (JWT) and a unique login id if their username and password were valid. The values returned from the master server will be saved by the client for later on when they finally join a match. Game servers are responsible for running game matches. When a client wishes to join a match they will send their username and login id to the game server. The game server will then check with the master server to verify the client is who they claim to be. If the client is legitimate, the client is accepted, otherwise their kicked.</p>
<p>This set up protects the user's password from having to be sent to each game server. The JWT the client recieves will be stored in the config file of the game so they can re-login later on without having to re-enter their username and password each time. JWTs have a life span of 6 months, but will be continually rolling as each one will only be valid for one login. Passwords are salted and hashed before being stored in the database.</p>
<h2 id="the-master-server">The Master Server</h2>
<p>Let's talk about the design details for those interested in software design. The tech stack of the master server is as follows:</p>
<ul>
<li>NodeJS</li>
<li>MySQL</li>
<li>Ubuntu</li>
</ul>
<p>The master server follows the standard <!-- raw HTML omitted -->REST principles<!-- raw HTML omitted -->, and all interaction with the server are done via HTTP. To help out with handling HTTP requests the well known node module <!-- raw HTML omitted -->Express<!-- raw HTML omitted --> is being used. For database interactions I'm using <!-- raw HTML omitted -->TypeORM<!-- raw HTML omitted -->. I decided on TypeORM since it seemed more user friendly than Sequelize, and I haven't been dissapointed at all. I highly recommend it for anyone who needs a good ORM. I'm also taking advantage of TypeScript to help create a code base that will scale easier than plain JS. TypeScript is a nice addition to JavaScript and I do recommend it, but at the same time it's a leaky abstraction and unless your familiar with the quirks of JavaScript you might have some trouble working with it.</p>
<p>The master server is structured using the layered architecture pattern. The highest layer is the server layer which handles http requests and builds responses. In the middle is the business logic layer, and at the bottom is the data layer.</p>
<p><img src="images/2.jpg" alt=""></p>
<p>The server layer only handles incoming requests. It does not know any of the underlying logic, and simply redirects user requests to their corresponding logic handler. Once the business logic has finished it's job the server layer will build and return back a response to the request.</p>
<p>The business logic layer is where the real magic happens. This performs user validation, registration, or login requests. It also has the ability to send emails to confirm new user's emails, and more. All of the meat of the server lies here. The logic layer uses the data layer for data persistance.</p>
<p>Lastly is the data layer. This layer handles interacting with the database for basic CRUD (Create, Read, Update, Delete) operations with the database. It utilizes the repository pattern to offer storage places for various data models.</p>
<p>Currently the master server runs the database as well, and until this proves to be a bottleneck I'll keep it this way. The business logic layer, and data persistance layer are currently fully developed. I need to set up unit tests to weed out bugs in the logic layer. I'm currently trying to decide between using Jasmine or Jest for unit tests, and will report back with another update next Friday / Saturday. Stay tuned!</p>

</article>

    </main>

    <footer>
    <p>&copy; 2020 <a href="https://eddieabbondanz.io">Eddie Abbondanzio</a></p>
</footer> </body>
</html>